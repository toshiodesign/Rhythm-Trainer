(function() {
    // 確保全域陣列存在
    if (!window.ALL_PATTERNS) window.ALL_PATTERNS = [];

    // --- Part 1: 基礎四分與八分音符 (Simple Meter) ---
    const patterns = [
        {
            id: 'simple_q',
            type: 'simple',
            name: '四分音符 (Quarter)',
            events: [0],
            svg: `<svg viewBox="0 0 200 130"><path d="m110.59,29.67v59.2c0,2.03-.67,3.92-2.02,5.66-1.35,1.75-3.08,3.15-5.2,4.21s-4.37,1.59-6.73,1.59c-2.17,0-3.92-.55-5.24-1.66-1.32-1.11-1.98-2.61-1.98-4.5,0-1.46.43-2.88,1.27-4.25.85-1.37,1.97-2.61,3.36-3.72,1.39-1.11,2.91-1.98,4.57-2.62,1.65-.64,3.28-.96,4.89-.96,2.03,0,3.78.59,5.24,1.77V29.67h1.84Z"/></svg>`
        },
        {
            id: 'simple_qr',
            type: 'simple',
            name: '四分休止符 (Quarter Rest)',
            events: [],
            svg: `<svg viewBox="0 0 200 130"><path d="m97.01,30.13l14.98,18.26c-3.12,3.68-5.52,6.87-7.21,9.55-1.69,2.68-2.53,5.4-2.53,8.14,0,2.31.75,4.73,2.25,7.25,1.5,2.53,3.87,5.73,7.11,9.6l-1.5,2.06c-2.75-1.75-5.31-2.62-7.68-2.62-1.75,0-3.06.58-3.93,1.73-.87,1.16-1.31,2.54-1.31,4.17,0,2,.42,3.89,1.26,5.66.84,1.78,1.98,3.48,3.42,5.1l-1.22,1.78c-4.31-3.12-7.49-5.96-9.55-8.52-2.06-2.56-3.09-5.34-3.09-8.33,0-2.68.84-4.65,2.53-5.9,1.69-1.25,3.71-1.87,6.09-1.87,1.87,0,4.31.72,7.3,2.15v-.19l-14.42-19.19c6.3-5.55,9.46-10.73,9.46-15.54,0-3.81-2-8.24-5.99-13.29h4.03Z"/></svg>`
        },
        {
            id: 'simple_8_8',
            type: 'simple',
            name: '兩個八分 (Two 8ths)',
            events: [0, 0.5],
            svg: `<svg viewBox="0 0 200 130"><path d="m83.19,29.67v59.2c0,2.03-.67,3.92-2.02,5.66-1.35,1.75-3.08,3.15-5.2,4.21s-4.37,1.59-6.73,1.59c-2.17,0-3.92-.55-5.24-1.66-1.32-1.11-1.98-2.61-1.98-4.5,0-1.46.43-2.88,1.27-4.25.85-1.37,1.97-2.61,3.36-3.72,1.39-1.11,2.91-1.98,4.57-2.62,1.65-.64,3.28-.96,4.89-.96,2.03,0,3.78.59,5.24,1.77V29.67h1.84Z"/><path d="m137.98,29.67v59.2c0,2.03-.67,3.92-2.02,5.66-1.35,1.75-3.08,3.15-5.2,4.21s-4.37,1.59-6.73,1.59c-2.17,0-3.92-.55-5.24-1.66-1.32-1.11-1.98-2.61-1.98-4.5,0-1.46.43-2.88,1.27-4.25.85-1.37,1.97-2.61,3.36-3.72,1.39-1.11,2.91-1.98,4.57-2.62,1.65-.64,3.28-.96,4.89-.96,2.03,0,3.78.59,5.24,1.77V29.67h1.84Z"/><rect x="81.35" y="29.67" width="56.64" height="5.53"/></svg>`
        },
        {
            id: 'simple_r8_8',
            type: 'simple',
            name: '八分休止+八分 (Rest + 8th)',
            events: [0.5],
            svg: `<svg viewBox="0 0 200 130"><path d="m65.64,82.07l6.8-24.08c-.99.9-2.11,1.53-3.36,1.91-1.25.38-2.49.57-3.72.57-2.03,0-3.73-.54-5.1-1.63-1.37-1.08-2.05-2.64-2.05-4.67,0-1.32.47-2.44,1.42-3.36.94-.92,2.15-1.38,3.61-1.38,1.37,0,2.49.44,3.36,1.31.87.87,1.31,2.04,1.31,3.5,0,1.04-.24,1.96-.71,2.76,0,.28.28.43.85.43,2.59,0,5.07-2.03,7.43-6.09h1.28l-8.57,30.73h-2.55Z"/><path d="m122.9,31.16h1.79c.28,1.9.62,3.57,1.03,5.03.41,1.45,1.01,2.87,1.79,4.23.78,1.36,1.81,2.83,3.1,4.4,1.38,1.62,2.53,2.97,3.45,4.05.92,1.09,1.84,2.23,2.76,3.43,1.7,2.13,2.95,4.31,3.76,6.55.8,2.24,1.21,4.52,1.21,6.83,0,4.81-2.02,10.63-6.07,17.47h-1.1c1.29-2.73,2.45-5.46,3.48-8.21,1.03-2.75,1.55-5.37,1.55-7.87s-.65-5.06-1.93-7.69-3.09-4.85-5.41-6.65c-2.32-1.8-4.86-2.8-7.62-2.98v39.23c0,1.99-.63,3.85-1.9,5.58s-2.93,3.13-5,4.19c-2.07,1.06-4.34,1.59-6.83,1.59-1.98,0-3.64-.51-5-1.53-1.36-1.02-2.03-2.52-2.03-4.51,0-1.48.39-2.9,1.17-4.26.78-1.36,1.81-2.58,3.1-3.64,1.29-1.06,2.7-1.89,4.24-2.5,1.54-.6,3.09-.9,4.66-.9,2.67,0,4.6.53,5.79,1.59V31.16Z"/></svg>`
        },
        {
            id: 'simple_8_r8',
            type: 'simple',
            name: '八分+八分休止 (8th + Rest)',
            events: [0],
            svg: `<svg viewBox="0 0 200 130"><path d="m130.51,82.07l6.8-24.08c-.99.9-2.11,1.53-3.36,1.91-1.25.38-2.49.57-3.72.57-2.03,0-3.73-.54-5.1-1.63-1.37-1.08-2.05-2.64-2.05-4.67,0-1.32.47-2.44,1.42-3.36.94-.92,2.15-1.38,3.61-1.38,1.37,0,2.49.44,3.36,1.31.87.87,1.31,2.04,1.31,3.5,0,1.04-.24,1.96-.71,2.76,0,.28.28.43.85.43,2.59,0,5.07-2.03,7.43-6.09h1.28l-8.57,30.73h-2.55Z"/><path d="m77.33,31.16h1.79c.28,1.9.62,3.57,1.03,5.03.41,1.45,1.01,2.87,1.79,4.23.78,1.36,1.81,2.83,3.1,4.4,1.38,1.62,2.53,2.97,3.45,4.05.92,1.09,1.84,2.23,2.76,3.43,1.7,2.13,2.95,4.31,3.76,6.55.8,2.24,1.21,4.52,1.21,6.83,0,4.81-2.02,10.63-6.07,17.47h-1.1c1.29-2.73,2.45-5.46,3.48-8.21,1.03-2.75,1.55-5.37,1.55-7.87s-.65-5.06-1.93-7.69-3.09-4.85-5.41-6.65c-2.32-1.8-4.86-2.8-7.62-2.98v39.23c0,1.99-.63,3.85-1.9,5.58s-2.93,3.13-5,4.19c-2.07,1.06-4.34,1.59-6.83,1.59-1.98,0-3.64-.51-5-1.53-1.36-1.02-2.03-2.52-2.03-4.51,0-1.48.39-2.9,1.17-4.26.78-1.36,1.81-2.58,3.1-3.64,1.29-1.06,2.7-1.89,4.24-2.5,1.54-.6,3.09-.9,4.66-.9,2.67,0,4.6.53,5.79,1.59V31.16Z"/></svg>`
        }
    ];

    // 將資料推入全域陣列
    window.ALL_PATTERNS.push(...patterns);
})();